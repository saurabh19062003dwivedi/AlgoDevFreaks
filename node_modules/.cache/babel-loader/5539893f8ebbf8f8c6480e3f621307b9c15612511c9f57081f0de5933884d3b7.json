{"ast":null,"code":"import { toast } from \"react-hot-toast\";\nimport { setLoading, setUser } from \"../../slices/profileSlice\";\nimport { apiConnector } from \"../apiconnector\";\nimport { profileEndpoints } from \"../apis\";\nimport { logout } from \"./authAPI\";\nconst {\n  GET_USER_DETAILS_API,\n  GET_USER_ENROLLED_COURSES_API,\n  GET_INSTRUCTOR_DATA_API\n} = profileEndpoints;\nexport function getUserDetails(token, navigate) {\n  return async dispatch => {\n    const toastId = toast.loading(\"Loading...\");\n    dispatch(setLoading(true));\n    try {\n      const response = await apiConnector(\"GET\", GET_USER_DETAILS_API, null, {\n        Authorization: `Bearer ${token}`\n      });\n      console.log(\"GET_USER_DETAILS API RESPONSE............\", response);\n      if (!response.success) {\n        throw new Error(response.message);\n      }\n      const userImage = response.image ? response.image : `http://api.dicebear.com/5.x/initials/svg?seed=${response.firstName} ${response.lastName}`;\n      dispatch(setUser({\n        ...response,\n        image: userImage\n      }));\n    } catch (error) {\n      dispatch(logout(navigate));\n      console.log(\"GET_USER_DETAILS API ERROR............\", error);\n      toast.error(\"Could Not Get User Details\");\n    }\n    toast.dismiss(toastId);\n    dispatch(setLoading(false));\n  };\n}\nexport async function getUserEnrolledCourses(token) {\n  const toastId = toast.loading(\"Loading...\");\n  let result = [];\n  try {\n    console.log(\"BEFORE Calling BACKEND API FOR ENROLLED COURSES\");\n    const response = await apiConnector(\"GET\", GET_USER_ENROLLED_COURSES_API, null, {\n      Authorization: `Bearer ${token}`\n    });\n    console.log(\"AFTER Calling BACKEND API FOR ENROLLED COURSES\");\n    // console.log(\n    //   \"GET_USER_ENROLLED_COURSES_API API RESPONSE............\",\n    //   response\n    // )\n\n    if (!response.success) {\n      throw new Error(response.message);\n    }\n    result = response;\n  } catch (error) {\n    console.log(\"GET_USER_ENROLLED_COURSES_API API ERROR............\", error);\n    toast.error(\"Could Not Get Enrolled Courses\");\n  }\n  toast.dismiss(toastId);\n  return result;\n}\nexport async function getInstructorData(token) {\n  const toastId = toast.loading(\"Loading...\");\n  let result = [];\n  try {\n    const response = await apiConnector(\"GET\", GET_INSTRUCTOR_DATA_API, null, {\n      Authorization: `Bearer ${token}`\n    });\n    console.log(\"GET_INSTRUCTOR_API_RESPONSE\", response);\n    result = response === null || response === void 0 ? void 0 : response.courses; // ha maine chnage kiya tha kuchh error aa rha ths\n  } catch (error) {\n    console.log(\"GET_INSTRUCTOR_API ERROR\", error);\n    toast.error(\"Could not Get Instructor Data\");\n  }\n  toast.dismiss(toastId);\n  return result;\n}","map":{"version":3,"names":["toast","setLoading","setUser","apiConnector","profileEndpoints","logout","GET_USER_DETAILS_API","GET_USER_ENROLLED_COURSES_API","GET_INSTRUCTOR_DATA_API","getUserDetails","token","navigate","dispatch","toastId","loading","response","Authorization","console","log","success","Error","message","userImage","image","firstName","lastName","error","dismiss","getUserEnrolledCourses","result","getInstructorData","courses"],"sources":["C:/Users/saura/Desktop/StudyNotion-An-Online-Education-Platform-master/src/services/operations/profileAPI.js"],"sourcesContent":["import { toast } from \"react-hot-toast\"\n\nimport { setLoading, setUser } from \"../../slices/profileSlice\"\nimport { apiConnector } from \"../apiconnector\"\nimport { profileEndpoints } from \"../apis\"\nimport { logout } from \"./authAPI\"\n\nconst { GET_USER_DETAILS_API, GET_USER_ENROLLED_COURSES_API, GET_INSTRUCTOR_DATA_API } = profileEndpoints\n\nexport function getUserDetails(token, navigate) {\n  return async (dispatch) => {\n    const toastId = toast.loading(\"Loading...\")\n    dispatch(setLoading(true))\n    try {\n      const response = await apiConnector(\"GET\", GET_USER_DETAILS_API, null, {\n        Authorization: `Bearer ${token}`,\n      })\n      console.log(\"GET_USER_DETAILS API RESPONSE............\", response)\n\n      if (!response.success) {\n        throw new Error(response.message)\n      }\n      const userImage = response.image\n        ? response.image\n        : `http://api.dicebear.com/5.x/initials/svg?seed=${response.firstName} ${response.lastName}`\n      dispatch(setUser({ ...response, image: userImage }))\n    } catch (error) {\n      dispatch(logout(navigate))\n      console.log(\"GET_USER_DETAILS API ERROR............\", error)\n      toast.error(\"Could Not Get User Details\")\n    }\n    toast.dismiss(toastId)\n    dispatch(setLoading(false))\n  }\n}\n\nexport async function getUserEnrolledCourses(token) {\n  const toastId = toast.loading(\"Loading...\")\n  let result = []\n  try {\n    console.log(\"BEFORE Calling BACKEND API FOR ENROLLED COURSES\");\n    const response = await apiConnector(\n      \"GET\",\n      GET_USER_ENROLLED_COURSES_API,\n      null,\n      {\n        Authorization: `Bearer ${token}`,\n      }\n    )\n    console.log(\"AFTER Calling BACKEND API FOR ENROLLED COURSES\");\n    // console.log(\n    //   \"GET_USER_ENROLLED_COURSES_API API RESPONSE............\",\n    //   response\n    // )\n\n    if (!response.success) {\n      throw new Error(response.message)\n    }\n    result = response\n  } catch (error) {\n    console.log(\"GET_USER_ENROLLED_COURSES_API API ERROR............\", error)\n    toast.error(\"Could Not Get Enrolled Courses\")\n  }\n  toast.dismiss(toastId)\n  return result\n}\n\nexport async function getInstructorData(token) {\n  const toastId = toast.loading(\"Loading...\");\n  let result = [];\n  try{\n    const response = await apiConnector(\"GET\", GET_INSTRUCTOR_DATA_API, null, \n    {\n      Authorization: `Bearer ${token}`,\n    })\n\n    console.log(\"GET_INSTRUCTOR_API_RESPONSE\", response);\n    result = response?.courses  // ha maine chnage kiya tha kuchh error aa rha ths\n\n  }\n  catch(error) {\n    console.log(\"GET_INSTRUCTOR_API ERROR\", error);\n    toast.error(\"Could not Get Instructor Data\")\n  }\n  toast.dismiss(toastId);\n  return result;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}